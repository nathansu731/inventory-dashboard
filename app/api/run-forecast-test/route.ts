/*
* To be used in any charts etc with daily demand - overview chart?
*
* const res = await fetch("/api/run-forecast-test")
*
* */
export async function POST(request: { json: () => any }) {
  const body = await request.json()

  const query = `
    query RunForecastTest($input: ForecastInput) {
      runForecastTest(input: $input) {
        status
        result
      }
    }
  `

  const response = await fetch(process.env.APPSYNC_API_URL, {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      "x-api-key": process.env.APPSYNC_API_KEY
    },
    body: JSON.stringify({
      query,
      variables: {
        input: body
      }
    })
  })

  const json = await response.json()

  return Response.json(json.data.runForecastTest)
}
/*
* Response
*
*"runForecastTest": {
      "result": "[{\"sku\":\"SKU_01\",\"day\":1,\"demand\":17},
      * {\"sku\":\"SKU_01\",\"day\":2,\"demand\":25},
      * {\"sku\":\"SKU_01\",\"day\":3,\"demand\":12},
      * {\"sku\":\"SKU_01\",\"day\":4,\"demand\":20},
      * {\"sku\":\"SKU_01\",\"day\":5,\"demand\":27},{\"sku\":\"SKU_01\",\"day\":6,\"demand\":22},{\"sku\":\"SKU_01\",\"day\":7,\"demand\":14},{\"sku\":\"SKU_01\",\"day\":8,\"demand\":12},{\"sku\":\"SKU_01\",\"day\":9,\"demand\":25},{\"sku\":\"SKU_01\",\"day\":10,\"demand\":21},{\"sku\":\"SKU_01\",\"day\":11,\"demand\":21},{\"sku\":\"SKU_01\",\"day\":12,\"demand\":20},{\"sku\":\"SKU_01\",\"day\":13,\"demand\":17},{\"sku\":\"SKU_01\",\"day\":14,\"demand\":25},{\"sku\":\"SKU_01\",\"day\":15,\"demand\":23},{\"sku\":\"SKU_01\",\"day\":16,\"demand\":19},{\"sku\":\"SKU_01\",\"day\":17,\"demand\":16},{\"sku\":\"SKU_01\",\"day\":18,\"demand\":15},{\"sku\":\"SKU_01\",\"day\":19,\"demand\":18},{\"sku\":\"SKU_01\",\"day\":20,\"demand\":15},{\"sku\":\"SKU_01\",\"day\":21,\"demand\":17},{\"sku\":\"SKU_01\",\"day\":22,\"demand\":19},{\"sku\":\"SKU_01\",\"day\":23,\"demand\":14},{\"sku\":\"SKU_01\",\"day\":24,\"demand\":14},{\"sku\":\"SKU_01\",\"day\":25,\"demand\":18},{\"sku\":\"SKU_01\",\"day\":26,\"demand\":14},{\"sku\":\"SKU_01\",\"day\":27,\"demand\":24},{\"sku\":\"SKU_01\",\"day\":28,\"demand\":23},{\"sku\":\"SKU_01\",\"day\":29,\"demand\":23},{\"sku\":\"SKU_01\",\"day\":30,\"demand\":23},{\"sku\":\"SKU_02\",\"day\":1,\"demand\":22},{\"sku\":\"SKU_02\",\"day\":2,\"demand\":19},{\"sku\":\"SKU_02\",\"day\":3,\"demand\":18},{\"sku\":\"SKU_02\",\"day\":4,\"demand\":18},{\"sku\":\"SKU_02\",\"day\":5,\"demand\":16},{\"sku\":\"SKU_02\",\"day\":6,\"demand\":23},{\"sku\":\"SKU_02\",\"day\":7,\"demand\":19},{\"sku\":\"SKU_02\",\"day\":8,\"demand\":25},{\"sku\":\"SKU_02\",\"day\":9,\"demand\":15},{\"sku\":\"SKU_02\",\"day\":10,\"demand\":18},{\"sku\":\"SKU_02\",\"day\":11,\"demand\":17},{\"sku\":\"SKU_02\",\"day\":12,\"demand\":14},{\"sku\":\"SKU_02\",\"day\":13,\"demand\":21},{\"sku\":\"SKU_02\",\"day\":14,\"demand\":19},{\"sku\":\"SKU_02\",\"day\":15,\"demand\":19},{\"sku\":\"SKU_02\",\"day\":16,\"demand\":26},{\"sku\":\"SKU_02\",\"day\":17,\"demand\":18},{\"sku\":\"SKU_02\",\"day\":18,\"demand\":26},{\"sku\":\"SKU_02\",\"day\":19,\"demand\":13},{\"sku\":\"SKU_02\",\"day\":20,\"demand\":15},{\"sku\":\"SKU_02\",\"day\":21,\"demand\":20},{\"sku\":\"SKU_02\",\"day\":22,\"demand\":21},{\"sku\":\"SKU_02\",\"day\":23,\"demand\":17},{\"sku\":\"SKU_02\",\"day\":24,\"demand\":29},{\"sku\":\"SKU_02\",\"day\":25,\"demand\":14},{\"sku\":\"SKU_02\",\"day\":26,\"demand\":21},{\"sku\":\"SKU_02\",\"day\":27,\"demand\":22},{\"sku\":\"SKU_02\",\"day\":28,\"demand\":20},{\"sku\":\"SKU_02\",\"day\":29,\"demand\":24},{\"sku\":\"SKU_02\",\"day\":30,\"demand\":29},{\"sku\":\"SKU_03\",\"day\":1,\"demand\":17},{\"sku\":\"SKU_03\",\"day\":2,\"demand\":15},{\"sku\":\"SKU_03\",\"day\":3,\"demand\":16},{\"sku\":\"SKU_03\",\"day\":4,\"demand\":22},{\"sku\":\"SKU_03\",\"day\":5,\"demand\":19},{\"sku\":\"SKU_03\",\"day\":6,\"demand\":16},{\"sku\":\"SKU_03\",\"day\":7,\"demand\":20},{\"sku\":\"SKU_03\",\"day\":8,\"demand\":19},{\"sku\":\"SKU_03\",\"day\":9,\"demand\":20},{\"sku\":\"SKU_03\",\"day\":10,\"demand\":21},{\"sku\":\"SKU_03\",\"day\":11,\"demand\":18},{\"sku\":\"SKU_03\",\"day\":12,\"demand\":22},{\"sku\":\"SKU_03\",\"day\":13,\"demand\":19},{\"sku\":\"SKU_03\",\"day\":14,\"demand\":21},{\"sku\":\"SKU_03\",\"day\":15,\"demand\":24},{\"sku\":\"SKU_03\",\"day\":16,\"demand\":21},{\"sku\":\"SKU_03\",\"day\":17,\"demand\":18},{\"sku\":\"SKU_03\",\"day\":18,\"demand\":25},{\"sku\":\"SKU_03\",\"day\":19,\"demand\":24},{\"sku\":\"SKU_03\",\"day\":20,\"demand\":22},{\"sku\":\"SKU_03\",\"day\":21,\"demand\":21},{\"sku\":\"SKU_03\",\"day\":22,\"demand\":17},{\"sku\":\"SKU_03\",\"day\":23,\"demand\":25},{\"sku\":\"SKU_03\",\"day\":24,\"demand\":17},{\"sku\":\"SKU_03\",\"day\":25,\"demand\":26},{\"sku\":\"SKU_03\",\"day\":26,\"demand\":18},{\"sku\":\"SKU_03\",\"day\":27,\"demand\":15},{\"sku\":\"SKU_03\",\"day\":28,\"demand\":27},{\"sku\":\"SKU_03\",\"day\":29,\"demand\":20},{\"sku\":\"SKU_03\",\"day\":30,\"demand\":25},{\"sku\":\"SKU_04\",\"day\":1,\"demand\":17},{\"sku\":\"SKU_04\",\"day\":2,\"demand\":19},{\"sku\":\"SKU_04\",\"day\":3,\"demand\":16},{\"sku\":\"SKU_04\",\"day\":4,\"demand\":22},{\"sku\":\"SKU_04\",\"day\":5,\"demand\":18},{\"sku\":\"SKU_04\",\"day\":6,\"demand\":26},{\"sku\":\"SKU_04\",\"day\":7,\"demand\":27},{\"sku\":\"SKU_04\",\"day\":8,\"demand\":22},{\"sku\":\"SKU_04\",\"day\":9,\"demand\":18},{\"sku\":\"SKU_04\",\"day\":10,\"demand\":20},{\"sku\":\"SKU_04\",\"day\":11,\"demand\":26},{\"sku\":\"SKU_04\",\"day\":12,\"demand\":19},{\"sku\":\"SKU_04\",\"day\":13,\"demand\":12},{\"sku\":\"SKU_04\",\"day\":14,\"demand\":16},{\"sku\":\"SKU_04\",\"day\":15,\"demand\":23},{\"sku\":\"SKU_04\",\"day\":16,\"demand\":21},{\"sku\":\"SKU_04\",\"day\":17,\"demand\":21},{\"sku\":\"SKU_04\",\"day\":18,\"demand\":22},{\"sku\":\"SKU_04\",\"day\":19,\"demand\":28},{\"sku\":\"SKU_04\",\"day\":20,\"demand\":22},{\"sku\":\"SKU_04\",\"day\":21,\"demand\":16},{\"sku\":\"SKU_04\",\"day\":22,\"demand\":20},{\"sku\":\"SKU_04\",\"day\":23,\"demand\":15},{\"sku\":\"SKU_04\",\"day\":24,\"demand\":24},{\"sku\":\"SKU_04\",\"day\":25,\"demand\":25},{\"sku\":\"SKU_04\",\"day\":26,\"demand\":27},{\"sku\":\"SKU_04\",\"day\":27,\"demand\":20},{\"sku\":\"SKU_04\",\"day\":28,\"demand\":18},{\"sku\":\"SKU_04\",\"day\":29,\"demand\":20},{\"sku\":\"SKU_04\",\"day\":30,\"demand\":30},{\"sku\":\"SKU_05\",\"day\":1,\"demand\":28},{\"sku\":\"SKU_05\",\"day\":2,\"demand\":13},{\"sku\":\"SKU_05\",\"day\":3,\"demand\":15},{\"sku\":\"SKU_05\",\"day\":4,\"demand\":30},{\"sku\":\"SKU_05\",\"day\":5,\"demand\":9},{\"sku\":\"SKU_05\",\"day\":6,\"demand\":21},{\"sku\":\"SKU_05\",\"day\":7,\"demand\":15},{\"sku\":\"SKU_05\",\"day\":8,\"demand\":19},{\"sku\":\"SKU_05\",\"day\":9,\"demand\":19},{\"sku\":\"SKU_05\",\"day\":10,\"demand\":12},{\"sku\":\"SKU_05\",\"day\":11,\"demand\":24},{\"sku\":\"SKU_05\",\"day\":12,\"demand\":18},{\"sku\":\"SKU_05\",\"day\":13,\"demand\":24},{\"sku\":\"SKU_05\",\"day\":14,\"demand\":15},{\"sku\":\"SKU_05\",\"day\":15,\"demand\":27},{\"sku\":\"SKU_05\",\"day\":16,\"demand\":22},{\"sku\":\"SKU_05\",\"day\":17,\"demand\":17},{\"sku\":\"SKU_05\",\"day\":18,\"demand\":21},{\"sku\":\"SKU_05\",\"day\":19,\"demand\":28},{\"sku\":\"SKU_05\",\"day\":20,\"demand\":14},{\"sku\":\"SKU_05\",\"day\":21,\"demand\":19},{\"sku\":\"SKU_05\",\"day\":22,\"demand\":29},{\"sku\":\"SKU_05\",\"day\":23,\"demand\":16},{\"sku\":\"SKU_05\",\"day\":24,\"demand\":28},{\"sku\":\"SKU_05\",\"day\":25,\"demand\":15},{\"sku\":\"SKU_05\",\"day\":26,\"demand\":21},{\"sku\":\"SKU_05\",\"day\":27,\"demand\":17},{\"sku\":\"SKU_05\",\"day\":28,\"demand\":16},{\"sku\":\"SKU_05\",\"day\":29,\"demand\":18},{\"sku\":\"SKU_05\",\"day\":30,\"demand\":16},{\"sku\":\"SKU_06\",\"day\":1,\"demand\":19},{\"sku\":\"SKU_06\",\"day\":2,\"demand\":18},{\"sku\":\"SKU_06\",\"day\":3,\"demand\":19},{\"sku\":\"SKU_06\",\"day\":4,\"demand\":28},{\"sku\":\"SKU_06\",\"day\":5,\"demand\":16},{\"sku\":\"SKU_06\",\"day\":6,\"demand\":20},{\"sku\":\"SKU_06\",\"day\":7,\"demand\":18},{\"sku\":\"SKU_06\",\"day\":8,\"demand\":20},{\"sku\":\"SKU_06\",\"day\":9,\"demand\":15},{\"sku\":\"SKU_06\",\"day\":10,\"demand\":16},{\"sku\":\"SKU_06\",\"day\":11,\"demand\":22},{\"sku\":\"SKU_06\",\"day\":12,\"demand\":14},{\"sku\":\"SKU_06\",\"day\":13,\"demand\":14},{\"sku\":\"SKU_06\",\"day\":14,\"demand\":29},{\"sku\":\"SKU_06\",\"day\":15,\"demand\":25},{\"sku\":\"SKU_06\",\"day\":16,\"demand\":18},{\"sku\":\"SKU_06\",\"day\":17,\"demand\":22},{\"sku\":\"SKU_06\",\"day\":18,\"demand\":18},{\"sku\":\"SKU_06\",\"day\":19,\"demand\":17},{\"sku\":\"SKU_06\",\"day\":20,\"demand\":19},{\"sku\":\"SKU_06\",\"day\":21,\"demand\":16},{\"sku\":\"SKU_06\",\"day\":22,\"demand\":19},{\"sku\":\"SKU_06\",\"day\":23,\"demand\":20},{\"sku\":\"SKU_06\",\"day\":24,\"demand\":21},{\"sku\":\"SKU_06\",\"day\":25,\"demand\":25},{\"sku\":\"SKU_06\",\"day\":26,\"demand\":17},{\"sku\":\"SKU_06\",\"day\":27,\"demand\":24},{\"sku\":\"SKU_06\",\"day\":28,\"demand\":20},{\"sku\":\"SKU_06\",\"day\":29,\"demand\":32},{\"sku\":\"SKU_06\",\"day\":30,\"demand\":21},{\"sku\":\"SKU_07\",\"day\":1,\"demand\":19},{\"sku\":\"SKU_07\",\"day\":2,\"demand\":15},{\"sku\":\"SKU_07\",\"day\":3,\"demand\":22},{\"sku\":\"SKU_07\",\"day\":4,\"demand\":24},{\"sku\":\"SKU_07\",\"day\":5,\"demand\":23},{\"sku\":\"SKU_07\",\"day\":6,\"demand\":18},{\"sku\":\"SKU_07\",\"day\":7,\"demand\":20},{\"sku\":\"SKU_07\",\"day\":8,\"demand\":16},{\"sku\":\"SKU_07\",\"day\":9,\"demand\":25},{\"sku\":\"SKU_07\",\"day\":10,\"demand\":22},{\"sku\":\"SKU_07\",\"day\":11,\"demand\":14},{\"sku\":\"SKU_07\",\"day\":12,\"demand\":19},{\"sku\":\"SKU_07\",\"day\":13,\"demand\":20},{\"sku\":\"SKU_07\",\"day\":14,\"demand\":16},{\"sku\":\"SKU_07\",\"day\":15,\"demand\":23},{\"sku\":\"SKU_07\",\"day\":16,\"demand\":24},{\"sku\":\"SKU_07\",\"day\":17,\"demand\":23},{\"sku\":\"SKU_07\",\"day\":18,\"demand\":19},{\"sku\":\"SKU_07\",\"day\":19,\"demand\":35},{\"sku\":\"SKU_07\",\"day\":20,\"demand\":26},{\"sku\":\"SKU_07\",\"day\":21,\"demand\":14},{\"sku\":\"SKU_07\",\"day\":22,\"demand\":24},{\"sku\":\"SKU_07\",\"day\":23,\"demand\":13},{\"sku\":\"SKU_07\",\"day\":24,\"demand\":13},{\"sku\":\"SKU_07\",\"day\":25,\"demand\":12},{\"sku\":\"SKU_07\",\"day\":26,\"demand\":18},{\"sku\":\"SKU_07\",\"day\":27,\"demand\":17},{\"sku\":\"SKU_07\",\"day\":28,\"demand\":15},{\"sku\":\"SKU_07\",\"day\":29,\"demand\":27},{\"sku\":\"SKU_07\",\"day\":30,\"demand\":19},{\"sku\":\"SKU_08\",\"day\":1,\"demand\":24},{\"sku\":\"SKU_08\",\"day\":2,\"demand\":22},{\"sku\":\"SKU_08\",\"day\":3,\"demand\":19},{\"sku\":\"SKU_08\",\"day\":4,\"demand\":13},{\"sku\":\"SKU_08\",\"day\":5,\"demand\":18},{\"sku\":\"SKU_08\",\"day\":6,\"demand\":12},{\"sku\":\"SKU_08\",\"day\":7,\"demand\":25},{\"sku\":\"SKU_08\",\"day\":8,\"demand\":30},{\"sku\":\"SKU_08\",\"day\":9,\"demand\":26},{\"sku\":\"SKU_08\",\"day\":10,\"demand\":19},{\"sku\":\"SKU_08\",\"day\":11,\"demand\":12},{\"sku\":\"SKU_08\",\"day\":12,\"demand\":24},{\"sku\":\"SKU_08\",\"day\":13,\"demand\":17},{\"sku\":\"SKU_08\",\"day\":14,\"demand\":24},{\"sku\":\"SKU_08\",\"day\":15,\"demand\":23},{\"sku\":\"SKU_08\",\"day\":16,\"demand\":13},{\"sku\":\"SKU_08\",\"day\":17,\"demand\":18},{\"sku\":\"SKU_08\",\"day\":18,\"demand\":16},{\"sku\":\"SKU_08\",\"day\":19,\"demand\":20},{\"sku\":\"SKU_08\",\"day\":20,\"demand\":21},{\"sku\":\"SKU_08\",\"day\":21,\"demand\":20},{\"sku\":\"SKU_08\",\"day\":22,\"demand\":12},{\"sku\":\"SKU_08\",\"day\":23,\"demand\":16},{\"sku\":\"SKU_08\",\"day\":24,\"demand\":18},{\"sku\":\"SKU_08\",\"day\":25,\"demand\":20},{\"sku\":\"SKU_08\",\"day\":26,\"demand\":20},{\"sku\":\"SKU_08\",\"day\":27,\"demand\":20},{\"sku\":\"SKU_08\",\"day\":28,\"demand\":27},{\"sku\":\"SKU_08\",\"day\":29,\"demand\":19},{\"sku\":\"SKU_08\",\"day\":30,\"demand\":20},{\"sku\":\"SKU_09\",\"day\":1,\"demand\":25},{\"sku\":\"SKU_09\",\"day\":2,\"demand\":24},{\"sku\":\"SKU_09\",\"day\":3,\"demand\":25},{\"sku\":\"SKU_09\",\"day\":4,\"demand\":17},{\"sku\":\"SKU_09\",\"day\":5,\"demand\":20},{\"sku\":\"SKU_09\",\"day\":6,\"demand\":27},{\"sku\":\"SKU_09\",\"day\":7,\"demand\":25},{\"sku\":\"SKU_09\",\"day\":8,\"demand\":16},{\"sku\":\"SKU_09\",\"day\":9,\"demand\":17},{\"sku\":\"SKU_09\",\"day\":10,\"demand\":15},{\"sku\":\"SKU_09\",\"day\":11,\"demand\":18},{\"sku\":\"SKU_09\",\"day\":12,\"demand\":14},{\"sku\":\"SKU_09\",\"day\":13,\"demand\":20},{\"sku\":\"SKU_09\",\"day\":14,\"demand\":25},{\"sku\":\"SKU_09\",\"day\":15,\"demand\":29},{\"sku\":\"SKU_09\",\"day\":16,\"demand\":25},{\"sku\":\"SKU_09\",\"day\":17,\"demand\":23},{\"sku\":\"SKU_09\",\"day\":18,\"demand\":12},{\"sku\":\"SKU_09\",\"day\":19,\"demand\":24},{\"sku\":\"SKU_09\",\"day\":20,\"demand\":17},{\"sku\":\"SKU_09\",\"day\":21,\"demand\":19},{\"sku\":\"SKU_09\",\"day\":22,\"demand\":14},{\"sku\":\"SKU_09\",\"day\":23,\"demand\":23},{\"sku\":\"SKU_09\",\"day\":24,\"demand\":19},{\"sku\":\"SKU_09\",\"day\":25,\"demand\":23},{\"sku\":\"SKU_09\",\"day\":26,\"demand\":18},{\"sku\":\"SKU_09\",\"day\":27,\"demand\":21},{\"sku\":\"SKU_09\",\"day\":28,\"demand\":13},{\"sku\":\"SKU_09\",\"day\":29,\"demand\":23},{\"sku\":\"SKU_09\",\"day\":30,\"demand\":19},{\"sku\":\"SKU_10\",\"day\":1,\"demand\":22},{\"sku\":\"SKU_10\",\"day\":2,\"demand\":25},{\"sku\":\"SKU_10\",\"day\":3,\"demand\":20},{\"sku\":\"SKU_10\",\"day\":4,\"demand\":24},{\"sku\":\"SKU_10\",\"day\":5,\"demand\":14},{\"sku\":\"SKU_10\",\"day\":6,\"demand\":13},{\"sku\":\"SKU_10\",\"day\":7,\"demand\":21},{\"sku\":\"SKU_10\",\"day\":8,\"demand\":24},{\"sku\":\"SKU_10\",\"day\":9,\"demand\":20},{\"sku\":\"SKU_10\",\"day\":10,\"demand\":16},{\"sku\":\"SKU_10\",\"day\":11,\"demand\":22},{\"sku\":\"SKU_10\",\"day\":12,\"demand\":24},{\"sku\":\"SKU_10\",\"day\":13,\"demand\":27},{\"sku\":\"SKU_10\",\"day\":14,\"demand\":20},{\"sku\":\"SKU_10\",\"day\":15,\"demand\":19},{\"sku\":\"SKU_10\",\"day\":16,\"demand\":12},{\"sku\":\"SKU_10\",\"day\":17,\"demand\":15},{\"sku\":\"SKU_10\",\"day\":18,\"demand\":15},{\"sku\":\"SKU_10\",\"day\":19,\"demand\":18},{\"sku\":\"SKU_10\",\"day\":20,\"demand\":17},{\"sku\":\"SKU_10\",\"day\":21,\"demand\":18},{\"sku\":\"SKU_10\",\"day\":22,\"demand\":20},{\"sku\":\"SKU_10\",\"day\":23,\"demand\":16},{\"sku\":\"SKU_10\",\"day\":24,\"demand\":20},{\"sku\":\"SKU_10\",\"day\":25,\"demand\":22},{\"sku\":\"SKU_10\",\"day\":26,\"demand\":18},{\"sku\":\"SKU_10\",\"day\":27,\"demand\":34},{\"sku\":\"SKU_10\",\"day\":28,\"demand\":22},{\"sku\":\"SKU_10\",\"day\":29,\"demand\":21},{\"sku\":\"SKU_10\",\"day\":30,\"demand\":24}]",
      "status": "success"
    }
* */